flowchart TD
    I[Entrar a ruta protegida] --> Q{cargando?}
    Q -- Si --> L[Render: Cargando sesion...]
    Q -- No --> S{usuario existe?}
    S -- No --> R[Redirect /login]
    S -- Si --> P{rolesPermitidos definidos?}
    P -- No --> OK[Render children]
    P -- Si --> H{usuario.rol incluido?}
    H -- Si --> OK
    H -- No --> N[Redirect /]
